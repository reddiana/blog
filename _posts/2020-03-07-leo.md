---
toc: true
description: "Korbit 트레이팅봇 - 밀림 사자 Leo"
categories: [python, 가상화폐, bot, korbit]
use_math: true
---

# Leo - Korbit 트레이팅봇

## 배경지식

- [코빗 거래수수료](https://support.korbit.co.kr/customer/ko/portal/articles/2745022-거래-수수료-maker-taker-fee-는-어떻게-되나요-)
  ![img](https://support.korbit.co.kr/customer/portal/attachments/943949)

- [거래수수료 구분]([https://support.korbit.co.kr/customer/ko/portal/articles/2948345-%EA%B1%B0%EB%9E%98-%EC%88%98%EC%88%98%EB%A3%8C-%EA%B5%AC%EB%B6%84%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%90%98%EB%82%98%EC%9A%94-](https://support.korbit.co.kr/customer/ko/portal/articles/2948345-거래-수수료-구분은-어떻게-되나요-))
  - Taker 주문 : 즉시 체결되는 주문
       - 시장가로 주문
       - 지정가 주문 시, 이미 오더북에 올라와있는 주문과 동일한 금액으로 주문
       - 지정가 매수 주문 시, 체결 가능한 호가보다 높은 가격으로 주문
            - `최고 매수호가`  <  `매수주문가` → 비싸게 사겠다고 하니까 즉시 체결
       - 지정가 매도 주문 시, 체결 가능한 호가보다 낮은 가격으로 주문
            - `최저 매도호가` > `매도주문가`  → 싸게 팔겠다고 하니까 즉시 체결
  - **Maker 주문** : 즉시 체결되지 않는 주문
    - 지정가 매수 주문 시, 체결 가능한 호가보다 낮은 가격으로 주문
      - `최고 매수호가`  >  `매수주문가` → 싸게 사겠다고 하는 무리 중 하나
    - 지정가 매도 주문 시, 체결 가능한 호가보다 높은 가격으로 주문
      - `최저 매도호가` < `매도주문가`  → 비싸게 팔겠다고 하는 무리 중 하나

## 용어

- `최근내주문체결가`: 나의 주문 중 마지막으로 체결된 거래의 거래가
- `목표 밸런싱비율`:  "코인 평가금액 : 예수금잔고"의 목표 비율 
- `거래트리거링가격변동포인트`: 이 %포인트 만큼 체결가 변동이 일어나면 리밸런싱한다
- 제약조건
  - tick_size 호가단위
  - min_price 최소 주문가
  - order_min_size 최소 주문량
  - max_price 최대 주문가
  - order_max_size 최대 주문량
- 수수료
  - volume	해당 통화쌍의 30일간의 거래량(KRW)
  - maker_fee	베이시스 포인트(BPS - 1/100 퍼센트 기준)로 표기된 maker 거래 수수료율
  - taker_fee	베이시스 포인트(BPS - 1/100 퍼센트 기준)로 표기된 taker 거래 수수료율

## 로직

### 주문가/주문량 산출

#### 파라미터/변수

- 입력
  - 입력값
    - $b$   목표 밸런싱비율 
    - $t$   거래트리거링가격변동포인트
  - [체결된 주문내역](https://apidocs.korbit.co.kr/ko/#3dc3ae9243)
    - $p_f$ 최근내주문체결가
  - [잔고 조회](https://apidocs.korbit.co.kr/ko/#ac7d6b6a6f)
    - $a_i$ 코인보유량
    - $v_c$ 현금(예수금잔고) 
  - env
    - constans ([제약조건](https://apidocs.korbit.co.kr/ko/#6c6b9f83e3))
      - $a_m$ 최소주문량
    - [시장 현황 상세정보](https://apidocs.korbit.co.kr/ko/#b5b542c8be)
      - bid: `최고 매수호가` 현재 매수 주문 중 가장 높은 가격 
      - ask: `최저 매도호가` 현재 매도 주문 중 가장 낮은 가격 

- 중간값
  - $v_e$ 거래직전 평가액
  - $v_o$ 주문금액

- 리턴
  - $p_o$ 주문가
  - $a_o$ 주문량

### 로직

#### 매수

`목표밸런싱비율` $b$ 는 입력값으로 고정이다
$$
b = {v_e + v_o \over v_c - v_o}
$$